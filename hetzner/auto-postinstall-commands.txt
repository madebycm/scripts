# Auto Post-Install Commands
# @author madebycm (2025)
# Commands to run automatically after server creation via SSH

# Update system packages
apt update && apt upgrade -y

# Install essential packages
apt install -y curl wget git htop vim nano ufw fail2ban

# Setup basic firewall
ufw default deny incoming
ufw default allow outgoing
ufw allow ssh
ufw --force enable

# Configure fail2ban for SSH protection
systemctl enable fail2ban
systemctl start fail2ban

# Set timezone
timedatectl set-timezone UTC

# Create a basic user (optional - commented out)
# useradd -m -s /bin/bash deploy
# usermod -aG sudo deploy

# Install Docker (commented out - uncomment if needed)
# curl -fsSL https://get.docker.com -o get-docker.sh
# sh get-docker.sh
# systemctl enable docker
# systemctl start docker

# Display system info
echo "=== Server Setup Complete ==="
echo "Hostname: $(hostname)"
echo "IP: $(curl -s ifconfig.me)"
echo "Uptime: $(uptime)"
echo "Disk Usage: $(df -h / | tail -1)"
echo "Memory: $(free -h | grep Mem)"